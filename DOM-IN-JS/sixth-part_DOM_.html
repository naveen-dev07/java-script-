<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Async Await Easy Notes</title>

<style>
  body {
    font-family: Arial;
    padding: 20px;
  }
  button {
    padding: 10px;
    margin-top: 10px;
  }
  .box {
    border: 2px solid black;
    padding: 15px;
    margin-top: 10px;
  }
</style>
</head>
<body>

<h2>Async / Await & Fetch API</h2>

<button id="btn">Get Data</button>
<div class="box" id="output">Open Console üëÄ</div>

<script>

/* =====================================================
   1. INTRODUCTION TO ASYNC / AWAIT
===================================================== */

/*
Async/Await = Promises ko easy banana
Code dikhta hai synchronous jaisa
Par kaam async hota hai
*/

/* =====================================================
   2. PROMISE RECAP
===================================================== */

function getDataPromise() {
  return new Promise((resolve) => {
    setTimeout(() => {
      resolve("Data received ‚úÖ");
    }, 2000);
  });
}

/* Using .then() */
getDataPromise().then(result => {
  console.log("Using then():", result);
});

/*
NOTE:
- then() readable nahi hota jab chain lambi ho
*/

/* =====================================================
   3. ASYNC / AWAIT BASIC
===================================================== */

async function getDataAsync() {
  const result = await getDataPromise();
  console.log("Using async/await:", result);
}

getDataAsync();

/*
NOTE:
- async ‚Üí function promise return karta hai
- await ‚Üí promise ka wait karta hai
*/

/* =====================================================
   4. SIMULATING SERVER FETCH
===================================================== */

function fakeServer() {
  return new Promise(resolve => {
    setTimeout(() => {
      resolve({ name: "Naveen", age: 20 });
    }, 1500);
  });
}

async function fetchFakeData() {
  const data = await fakeServer();
  console.log("Fake server data:", data);
}

fetchFakeData();

/*
NOTE:
- setTimeout ‚Üí network delay jaisa
*/

/* =====================================================
   5. INTRODUCTION TO FETCH API
===================================================== */

/*
fetch() = server se data lana
fetch() 2 promises deta hai:
1Ô∏è‚É£ response aana
2Ô∏è‚É£ data parse hona (json/text)
*/

const btn = document.getElementById("btn");
const output = document.getElementById("output");

/* =====================================================
   6. FETCH API WITH ASYNC / AWAIT (GET)
===================================================== */

async function getPosts() {
  const response = await fetch(
    "https://jsonplaceholder.typicode.com/posts/1"
  );

  const data = await response.json();
  console.log("GET Data:", data);

  output.innerText = data.title;
}

btn.addEventListener("click", getPosts);

/*
NOTE:
- pehla await ‚Üí response
- dusra await ‚Üí data
*/

/* =====================================================
   7. POST REQUEST (SEND DATA)
===================================================== */

async function createPost() {
  const response = await fetch(
    "https://jsonplaceholder.typicode.com/posts",
    {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        title: "Hello",
        body: "Async Await is easy",
        userId: 1
      })
    }
  );

  const data = await response.json();
  console.log("POST Data:", data);
}

createPost();

/*
NOTE:
- POST ‚Üí data bhejna
*/

/* =====================================================
   8. HTTP METHODS (SHORT NOTES)
===================================================== */

/*
GET     ‚Üí data lana
POST    ‚Üí naya data bhejna
PUT     ‚Üí pura update
PATCH   ‚Üí thoda update
DELETE  ‚Üí delete
*/

/* =====================================================
   9. ERROR HANDLING (TRY / CATCH)
===================================================== */

async function getWithErrorHandling() {
  try {
    const res = await fetch("https://wrong-url.com");
    const data = await res.json();
    console.log(data);
  } catch (error) {
    console.log("Error caught ‚ùå");
  }
}

getWithErrorHandling();

/*
NOTE:
- try ‚Üí risky code
- catch ‚Üí error handle
*/

/* =====================================================
   FINAL TIP
===================================================== */

/*
Async journey:
Callbacks ‚ùå
Promises üôÇ 
Async/Await üòé (BEST)


</script>
</body>
</html>
